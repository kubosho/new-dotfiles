eval "$(devbox global shellenv)"

# Sheldon plugin manager
eval "$(sheldon source)"

# Completion settings
autoload -Uz compinit && compinit

eval "$(starship init zsh)"

# ghq + fzf: select repository and cd into it
gf() {
  local repo=$(ghq list | fzf)
  if [ -n "$repo" ]; then
    cd "$(ghq root)/$repo"
  fi
}

# Key bindings for history navigation
# up-line-or-search: filters history by current input, or navigates normally if empty
bindkey '^P' up-line-or-search
bindkey '^N' down-line-or-search

# Google Cloud
if [ -f "${XDG_BIN_HOME}/google-cloud-sdk/path.zsh.inc" ]; then . "${XDG_BIN_HOME}/google-cloud-sdk/path.zsh.inc"; fi
if [ -f "${XDG_BIN_HOME}/google-cloud-sdk/completion.zsh.inc" ]; then . "${XDG_BIN_HOME}/google-cloud-sdk/completion.zsh.inc"; fi
